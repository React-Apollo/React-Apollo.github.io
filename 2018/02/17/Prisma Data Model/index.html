<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">




  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Graphcool,Prisma," />










<meta name="description" content="alias: eiroozae8u description: An overview of how to design data models with Prisma. Data ModellingOverviewPrisma uses the GraphQL Schema Definition Language (SDL) for data modeling. Your data model">
<meta name="keywords" content="Graphcool,Prisma">
<meta property="og:type" content="article">
<meta property="og:title" content="Prisma DataModel">
<meta property="og:url" content="https://React-Apollo.github.io/2018/02/17/Prisma Data Model/index.html">
<meta property="og:site_name" content="Javascript-React-Apollo-GraphQL-Ramda-Prisma">
<meta property="og:description" content="alias: eiroozae8u description: An overview of how to design data models with Prisma. Data ModellingOverviewPrisma uses the GraphQL Schema Definition Language (SDL) for data modeling. Your data model">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-04-07T02:42:18.251Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Prisma DataModel">
<meta name="twitter:description" content="alias: eiroozae8u description: An overview of how to design data models with Prisma. Data ModellingOverviewPrisma uses the GraphQL Schema Definition Language (SDL) for data modeling. Your data model">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://React-Apollo.github.io/2018/02/17/Prisma Data Model/"/>





  <title>Prisma DataModel | Javascript-React-Apollo-GraphQL-Ramda-Prisma</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Javascript-React-Apollo-GraphQL-Ramda-Prisma</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">All In One</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            站点地图
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://React-Apollo.github.io/2018/02/17/Prisma Data Model/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="React-Apollo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Javascript-React-Apollo-GraphQL-Ramda-Prisma">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Prisma DataModel</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-17T21:34:38+00:00">
                2018-02-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-04-07T02:42:18+00:00">
                2018-04-07
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术备忘/" itemprop="url" rel="index">
                    <span itemprop="name">技术备忘</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/02/17/Prisma Data Model/" class="leancloud_visitors" data-flag-title="Prisma DataModel">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  4,607
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  29
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <hr>
<p>alias: eiroozae8u</p>
<h2 id="description-An-overview-of-how-to-design-data-models-with-Prisma"><a href="#description-An-overview-of-how-to-design-data-models-with-Prisma" class="headerlink" title="description: An overview of how to design data models with Prisma."></a>description: An overview of how to design data models with Prisma.</h2>
<h1 id="Data-Modelling"><a href="#Data-Modelling" class="headerlink" title="Data Modelling"></a>Data Modelling</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>Prisma uses the GraphQL <a href="https://blog.graph.cool/graphql-sdl-schema-definition-language-6755bcb9ce51" target="_blank" rel="noopener">Schema Definition Language</a> (SDL) for data modeling. Your data model is written in one or more <code>.graphql</code>-files and is the foundation for the actual database schema that Prisma generates under the hood. If you’re using just a single file for your type definitions, this file is typically called <code>datamodel.graphql</code>.</p>
<blockquote>
<p>To learn more about the SDL, you can check out the <a href="http://graphql.org/learn/schema/#type-language" target="_blank" rel="noopener">official GraphQL documentation</a>.</p>
</blockquote>
<p>The <code>.graphql</code>-files containing the data model need to be specified in <code>prisma.yml</code> under the <code>datamodel</code> property. For example:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">datamodel:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">types.graphql</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">enums.graphql</span></span><br></pre></td></tr></table></figure>
<p>If there is only a single file that defines the data model, it can be specified as follows:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">datamodel:</span> <span class="string">datamodel.graphql</span></span><br></pre></td></tr></table></figure>
<p>The data model is the foundation for the GraphQL API of your Prisma service. Based on the data model, Prisma will generate a powerful <a href="https://blog.graph.cool/graphql-server-basics-the-schema-ac5e2950214e" target="_blank" rel="noopener">GraphQL schema</a> (called <strong>Prisma database schema</strong>) which defines CRUD operations for the types in the data model.</p>
<infobox><br><br>A GraphQL schema defines the operations of a GraphQL API. It effectively is a collection of <em>types</em> written in SDL (the SDL also supports primitives like interfaces, enums, union types and more, you can learn everything about GraphQL’s type system <a href="http://graphql.org/learn/schema/#type-system" target="_blank" rel="noopener">here</a>). A GraphQL schema has three special <em>root types</em>: <code>Query</code>, <code>Mutation</code> and <code>Subscription</code>. These types define the <em>entry points</em> for the API and define what operations the API will accept. To learn more about GraphQL schema, check out this <a href="https://blog.graph.cool/graphql-server-basics-the-schema-ac5e2950214e" target="_blank" rel="noopener">article</a>.<br><br></infobox>

<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>A simple <code>datamodel.graphql</code> file:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">type Tweet &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  createdAt: DateTime!</span><br><span class="line">  text: String!</span><br><span class="line">  owner: User!</span><br><span class="line">  location: Location!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type User &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  createdAt: DateTime!</span><br><span class="line">  updatedAt: DateTime!</span><br><span class="line">  handle: String! @unique</span><br><span class="line">  name: String</span><br><span class="line">  tweets: [Tweet!]!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Location &#123;</span><br><span class="line">  latitude: Float!</span><br><span class="line">  longitude: Float!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This example illustrates a few important concepts when working with your data model:</p>
<ul>
<li>The three types <code>Tweet</code>, <code>User</code> and <code>Location</code> are mapped to tables in the database.</li>
<li>There is a bidirectional relation between <code>User</code> and <code>Tweet</code></li>
<li>There is a unidirectional relation from <code>Tweet</code> to <code>Location</code></li>
<li>Except for the <code>name</code> field on <code>User</code>, all fields are required in the data model (as indicated by the <code>!</code> following the type).</li>
<li>The <code>id</code>, <code>createdAt</code> and <code>updatedAt</code> fields are managed by Prisma and read-only in the exposed GraphQL API (meaning they can not be altered via mutations).</li>
</ul>
<p>Creating and updating your data model is as simple as writing a text file. Once you’re happy with your data model, you can apply the changes to your Prisma service by running <code>prisma deploy</code>:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">$ prisma deploy</span><br><span class="line"></span><br><span class="line">Changes:</span><br><span class="line"></span><br><span class="line">  Tweet (Type)</span><br><span class="line">  + Created <span class="built_in">type</span> `Tweet`</span><br><span class="line">  + Created field `id` of <span class="built_in">type</span> `GraphQLID!`</span><br><span class="line">  + Created field `createdAt` of <span class="built_in">type</span> `DateTime!`</span><br><span class="line">  + Created field `text` of <span class="built_in">type</span> `String!`</span><br><span class="line">  + Created field `owner` of <span class="built_in">type</span> `Relation!`</span><br><span class="line">  + Created field `location` of <span class="built_in">type</span> `Relation!`</span><br><span class="line">  + Created field `updatedAt` of <span class="built_in">type</span> `DateTime!`</span><br><span class="line"></span><br><span class="line">  User (Type)</span><br><span class="line">  + Created <span class="built_in">type</span> `User`</span><br><span class="line">  + Created field `id` of <span class="built_in">type</span> `GraphQLID!`</span><br><span class="line">  + Created field `createdAt` of <span class="built_in">type</span> `DateTime!`</span><br><span class="line">  + Created field `updatedAt` of <span class="built_in">type</span> `DateTime!`</span><br><span class="line">  + Created field `handle` of <span class="built_in">type</span> `String!`</span><br><span class="line">  + Created field `name` of <span class="built_in">type</span> `String`</span><br><span class="line">  + Created field `tweets` of <span class="built_in">type</span> `[Relation!]!`</span><br><span class="line"></span><br><span class="line">  Location (Type)</span><br><span class="line">  + Created <span class="built_in">type</span> `Location`</span><br><span class="line">  + Created field `latitude` of <span class="built_in">type</span> `Float!`</span><br><span class="line">  + Created field `longitude` of <span class="built_in">type</span> `Float!`</span><br><span class="line">  + Created field `id` of <span class="built_in">type</span> `GraphQLID!`</span><br><span class="line">  + Created field `updatedAt` of <span class="built_in">type</span> `DateTime!`</span><br><span class="line">  + Created field `createdAt` of <span class="built_in">type</span> `DateTime!`</span><br><span class="line"></span><br><span class="line">  TweetToUser (Relation)</span><br><span class="line">  + Created relation between Tweet and User</span><br><span class="line"></span><br><span class="line">  LocationToTweet (Relation)</span><br><span class="line">  + Created relation between Location and Tweet</span><br><span class="line"></span><br><span class="line">Applying changes... (22/22)</span><br><span class="line">Applying changes... 0.4s</span><br></pre></td></tr></table></figure>
<h3 id="Building-blocks-of-the-data-model"><a href="#Building-blocks-of-the-data-model" class="headerlink" title="Building blocks of the data model"></a>Building blocks of the data model</h3><p>There are several available building blocks to shape your data model.</p>
<ul>
<li><a href="#object-types">Types</a> consist of multiple <a href="#fields">fields</a> and are used to group similar entities together. Each type in your data model is mapped to the database and CRUD operations are added to the GraphQL schema.</li>
<li><a href="#relations">Relations</a> describe <em>relationships</em> between types.</li>
<li><a href="http://graphql.org/learn/schema/#interfaces" target="_blank" rel="noopener">Interfaces</a> are abstract types that include a certain set of fields which a type must include to <em>implement</em> the interface. Currently, interfaces cannot be user-defined, but <a href="https://github.com/graphcool/framework/issues/83" target="_blank" rel="noopener">there’s a pending feature request</a> for advanced interface support.</li>
<li>Special <a href="#graphql-directives">directives</a> covering different use cases such as type constraints or cascading delete behaviour.</li>
</ul>
<p>The rest of this page describes these building blocks in more detail.</p>
<h2 id="Prisma-database-schema-vs-Data-model"><a href="#Prisma-database-schema-vs-Data-model" class="headerlink" title="Prisma database schema vs Data model"></a>Prisma database schema vs Data model</h2><p>When starting out with GraphQL and Prisma, the amount of <code>.graphql</code>-files you’re working with can be confusing. Yet, it’s crucial to understand what the role of each of them is.</p>
<p>In general, a <code>.graphql</code>-file can contain either of the following:</p>
<ul>
<li>GraphQL operations (i.e. <em>queries</em>, <em>mutations</em> or <em>subscriptions</em>)</li>
<li>GraphQL type definitions in SDL</li>
</ul>
<p>In the context of distinguishing the Prisma database schema from the data model, only the latter is relevant!</p>
<p>Note that not every <code>.graphql</code>-file that falls into the latter category is per se a <em>valid</em> GraphQL schema. As mentioned in the info box above, a GraphQL schema is characterised by the fact that it has three root types: <code>Query</code>, <code>Mutation</code> and <code>Subscription</code> in addition to any other types that are required for the API.</p>
<p>Now, by that definition the <strong>data model is not actually a GraphQL schema</strong>, despite being a <code>.graphql</code>-file written in SDL. It lacks the root types and thus doesn’t actually define API operations! Prisma simply uses the data model as a handy tool for you to express what the data model looks like.</p>
<p>As mentioned above, Prisma will then generate an actual GraphQL schema that contains the <code>Query</code>, <code>Mutation</code> and <code>Subscription</code> root types. This schema is typically stored inside your project as <code>prisma.graphql</code> and called the <strong>Prisma database schema</strong>. Note that you should never make any manual changes to this file!</p>
<p>As an example, consider the following very simple data model:</p>
<p><strong><code>datamodel.graphql</code></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type User &#123;</span><br><span class="line">  id: ID! @uniue</span><br><span class="line">  name: String!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If you’re deploying this data model to your Prisma service, Prisma will generate the following Prisma database schema that defines the GraphQL API of your service:</p>
<p><strong><code>prisma.graphql</code></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">type Query &#123;</span><br><span class="line">  users(where: UserWhereInput, orderBy: UserOrderByInput, skip: Int, after: String, before: String, first: Int, last: Int): [User]!</span><br><span class="line">  user(where: UserWhereUniqueInput!): User</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Mutation &#123;</span><br><span class="line">  createUser(data: UserCreateInput!): User!</span><br><span class="line">  updateUser(data: UserUpdateInput!, where: UserWhereUniqueInput!): User</span><br><span class="line">  deleteUser(where: UserWhereUniqueInput!): User</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Subscription &#123;</span><br><span class="line">  user(where: UserSubscriptionWhereInput): UserSubscriptionPayload</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note that this is a simplified version of the generated schema, you can find the full schema <a href="https://gist.github.com/gc-codesnippets/f302c104f2806f9e13f41d909e07d82d" target="_blank" rel="noopener">here</a>.</p>
<infobox><br><br>If you’ve already looked into building your own GraphQL server based on Prisma, you might have come across another <code>.graphql</code>-file which is referred to as your <strong>application schema</strong>. This is another proper GraphQL schema (meaning it contains the <code>Query</code>, <code>Mutation</code> and <code>Subscription</code> root types) that defines the API exposed to your client applications. It uses the underlying Prisma GraphQL API as a “query engine” to actually run the queries, mutations and subscriptions against the database.<br><br>A GraphQL server based on Prisma usually has two GraphQL APIs, think of them as two layers for your service:<br><br>- <strong>Application layer</strong>: Defined by the application schema (here is where you implement business logic, authentication, integrate with 3rd-party services, etc)<br>- <strong>Database layer</strong>: Defined by the Prisma database service<br><br></infobox>

<h2 id="Object-types"><a href="#Object-types" class="headerlink" title="Object types"></a>Object types</h2><p>An <em>object type</em> (or short <em>type</em>) defines the structure for one concrete part of your data model. It is used to represents <em>entities</em> from your <em>application domain</em>.</p>
<p> If you are familiar with SQL databases you can think of an object type as the schema for a <em>table</em> in your relational database. A type has a <em>name</em> and one or multiple <em><a href="#fields">fields</a></em>.</p>
<p>An instantiation of a type is called a <em>node</em>. This term refers to a node inside your <em>data graph</em>.<br>Every type you define in your data model will be available as an analogous type in the generated <em>Prisma database schema</em>.</p>
<h3 id="Defining-an-object-type"><a href="#Defining-an-object-type" class="headerlink" title="Defining an object type"></a>Defining an object type</h3><p>A object type is defined in the data model with the keyword <code>type</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Article &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  text: String!</span><br><span class="line">  isPublished: Boolean @default(value: &quot;false&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The type defined above has the following properties:</p>
<ul>
<li>Name: <code>Article</code></li>
<li>Fields: <code>id</code>, <code>text</code> and <code>isPublished</code> (with the default value <code>false</code>)</li>
</ul>
<h3 id="Generated-API-operations-for-types"><a href="#Generated-API-operations-for-types" class="headerlink" title="Generated API operations for types"></a>Generated API operations for types</h3><p>The types in your data model affect the available operations in the <a href="!alias-abogasd0go">Prisma GraphQL API</a>. For every type,</p>
<ul>
<li><a href="!alias-ahwee4zaey">queries</a> allow you to fetch one or many nodes of that type</li>
<li><a href="!alias-ol0yuoz6go">mutations</a> allow you to create, update or delete nodes of that type</li>
<li><a href="!alias-aey0vohche">subscriptions</a> allow you to get notified of changes to nodes of that type (i.e. new nodes are <em>created</em> or existing nodes are <em>updated</em> or <em>deleted</em>)</li>
</ul>
<h2 id="Fields"><a href="#Fields" class="headerlink" title="Fields"></a>Fields</h2><p><em>Fields</em> are the building blocks of a <a href="#object-types">type</a>, giving a node its <em>shape</em>. Every field is referenced by its name and is either <a href="#scalar-types">scalar</a> or a <a href="#relations">relation</a> field.</p>
<h3 id="Scalar-types"><a href="#Scalar-types" class="headerlink" title="Scalar types"></a>Scalar types</h3><h4 id="String"><a href="#String" class="headerlink" title="String"></a>String</h4><p>A <code>String</code> holds text. This is the type you would use for a username, the content of a blog post or anything else that is best represented as text.</p>
<p>Note: String values are currently limited to 256KB in size on the shared demo cluster. This limit can be increased on other clusters using <a href="https://github.com/graphcool/framework/issues/748" target="_blank" rel="noopener">the cluster configuration</a>.</p>
<p>In queries or mutations, String fields have to be specified using enclosing double quotes: <code>string: &quot;some-string&quot;</code>.</p>
<h4 id="Integer"><a href="#Integer" class="headerlink" title="Integer"></a>Integer</h4><p>An <code>Int</code> is a number that cannot have decimals. Use this to store values such as the weight of an ingredient required for a recipe or the minimum age for an event.</p>
<p>Note: <code>Int</code> values range from -2147483648 to 2147483647.</p>
<p>In queries or mutations, <code>Int</code> fields have to be specified without any enclosing characters: <code>int: 42</code>.</p>
<h4 id="Float"><a href="#Float" class="headerlink" title="Float"></a>Float</h4><p>A <code>Float</code> is a number that can have decimals. Use this to store values such as the price of an item in a store or the result of complex calculations.</p>
<p>In queries or mutations, <code>Float</code> fields have to be specified without any enclosing characters and an optional decimal point: <code>float: 42</code>, <code>float: 4.2</code>.</p>
<h4 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean"></a>Boolean</h4><p>A <code>Boolean</code> can have the value <code>true</code> or <code>false</code>. This is useful to keep track of settings such as whether the user wants to receive an email newsletter or if a recipe is appropriate for vegetarians.</p>
<p>In queries or mutations, <code>Boolean</code> fields have to be specified without any enclosing characters: <code>boolean: true</code>, <code>boolean: false</code>.</p>
<h4 id="DateTime"><a href="#DateTime" class="headerlink" title="DateTime"></a>DateTime</h4><p>The <code>DateTime</code> type can be used to store date or time values. A good example might be a person’s date of birth.</p>
<p>In queries or mutations, <code>DateTime</code> fields have to be specified in <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener">ISO 8601 format</a> with enclosing double quotes:</p>
<ul>
<li><code>datatime: &quot;2015&quot;</code></li>
<li><code>datatime: &quot;2015-11&quot;</code></li>
<li><code>datatime: &quot;2015-11-22&quot;</code></li>
<li><code>datetime: &quot;2015-11-22T13:57:31.123Z&quot;</code>.</li>
</ul>
<h4 id="Enum"><a href="#Enum" class="headerlink" title="Enum"></a>Enum</h4><p>Enums are defined on a service scope.</p>
<p>Like a Boolean an Enum can have one of a predefined set of values. The difference is that you can define the possible values. For example you could specify how an article should be formatted by creating an Enum with the possible values <code>COMPACT</code>, <code>WIDE</code> and <code>COVER</code>.</p>
<p>Note: Enum values can at most be 191 characters long.</p>
<p>In queries or mutations, Enum fields have to be specified without any enclosing characters. You can only use values that you defined for the enum: <code>enum: COMPACT</code>, <code>enum: WIDE</code>.</p>
<h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><p>Sometimes you need to store arbitrary JSON values for loosely structured data. The <code>JSON</code> type makes sure that it is actually valid Json and returns the value as a parsed Json object/array instead of a string.</p>
<p>Note: Json values are currently limited to 256KB in size on the shared demo cluster. This limit can be increased on other clusters using <a href="https://github.com/graphcool/framework/issues/748" target="_blank" rel="noopener">the cluster configuration</a>.</p>
<p>In queries or mutations, Json fields have to be specified with enclosing double quotes. Special characters have to be escaped: <code>json: &quot;{\&quot;int\&quot;: 1, \&quot;string\&quot;: \&quot;value\&quot;}&quot;</code>.</p>
<h4 id="ID"><a href="#ID" class="headerlink" title="ID"></a>ID</h4><p>An ID value is a generated unique 25-character string based on <a href="https://github.com/graphcool/cuid-java" target="_blank" rel="noopener">cuid</a>. Fields with ID values are system fields and just used internally, therefore it is not possible to create new fields with the ID type.</p>
<h3 id="Type-modifiers"><a href="#Type-modifiers" class="headerlink" title="Type modifiers"></a>Type modifiers</h3><h4 id="List"><a href="#List" class="headerlink" title="List"></a>List</h4><p>Scalar fields can be marked with the list field type. A field of a relation that has the many multiplicity will also be marked as a list.</p>
<p>In queries or mutations, list fields have to be enclosed by square brackets, while the separate entries of the list adhere to the same formatting rules as lined out above: <code>listString: [&quot;a string&quot;, &quot;another string&quot;]</code>, <code>listInt: [12, 24]</code>.</p>
<h4 id="Required"><a href="#Required" class="headerlink" title="Required"></a>Required</h4><p>Fields can be marked as required (sometimes also referred to as “non-null”). When creating a new node, you need to supply a value for fields which are required and don’t have a <a href="#default-value">default value</a>.</p>
<p>Required fields are marked using a <code>!</code> after the field type: <code>name: String!</code>.</p>
<h3 id="Field-constraints"><a href="#Field-constraints" class="headerlink" title="Field constraints"></a>Field constraints</h3><p>Fields can be configured with certain field constraints to add further semantics to your data model.</p>
<h4 id="Unique"><a href="#Unique" class="headerlink" title="Unique"></a>Unique</h4><p>Setting the <em>unique</em> constraint makes sure that two nodes of the type in question cannot have the same value for a certain field. The only exception is the <code>null</code> value, meaning that multiple nodes can have the value <code>null</code> without violating the constraint.</p>
<blockquote>
<p>A typical example would be an <code>email</code> field on the <code>User</code> type where the assumption is that every <code>User</code> should have a globally unique email address.</p>
</blockquote>
<p>Please note that only the first 191 characters in a String field are considered for uniqueness and the unique check is <strong>case insensitive</strong>. Storing two different strings is not possible if the first 191 characters are the same or if they only differ in casing.</p>
<p>To mark a field as unique, simply append the <code>@unique</code> directive to it:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type User &#123;</span><br><span class="line">  email: String! @unique</span><br><span class="line">  age: Int!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For every field that’s annotated with <code>@unique</code>, you’re able to query the corresponding node by providing a value for that field.</p>
<p>For example, for the above data model, you can now retrieve a particular <code>User</code> node by its <code>email</code> address:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  user(where: &#123;</span><br><span class="line">    email: &quot;alice@graph.cool&quot;</span><br><span class="line">  &#125;) &#123;</span><br><span class="line">    age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="More-constraints"><a href="#More-constraints" class="headerlink" title="More constraints"></a>More constraints</h4><p>More database constraints will be added going forward according to this <a href="https://github.com/graphcool/graphcool/issues/728" target="_blank" rel="noopener">feature request</a>.</p>
<h3 id="Default-value"><a href="#Default-value" class="headerlink" title="Default value"></a>Default value</h3><p>You can set a default value for scalar fields. The value will be taken for new nodes when no value was supplied during creation.</p>
<p>To specify a default value for a field, you can use the <code>@default</code> directive:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">type Story &#123;</span><br><span class="line">  isPublished: Boolean @default(value: &quot;false&quot;)</span><br><span class="line">  someNumber: Int! @default(value: &quot;42&quot;)</span><br><span class="line">  title: String! @default(value: &quot;My New Post&quot;)</span><br><span class="line">  publishDate: DateTime! @default(value: &quot;2018-01-26&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Notice that you need to always provide the value in double-quotes, even for non-string types such as <code>Boolean</code> or <code>Int</code>.</p>
<h3 id="System-fields"><a href="#System-fields" class="headerlink" title="System fields"></a>System fields</h3><p>The three fields <code>id</code>, <code>createdAt</code> and <code>updatedAt</code> have special meaning. They are optional in your data model, but will always be maintained in the underlying database. This way you can always add the field to your data model later, and the data will be available for existing nodes.</p>
<blockquote>
<p>The values of these fields are currently read-only in the GraphQL API (except when <a href="!alias-ol2eoh8xie">importing data</a>) but will be made configurable in the future. See <a href="https://github.com/graphcool/framework/issues/1278" target="_blank" rel="noopener">this proposal</a> for more information.</p>
</blockquote>
<infobox type="warning"><br><br>Notice that you cannot have custom fields that are called <code>id</code>, <code>createdAt</code> and <code>updatedAt</code> since these field names are reserved for the system fields. Here are the only supported declarations for these three fields:<br><br><em> <code>id: ID! @unique</code>
</em> <code>createdAt: DateTime!</code><br>* <code>updatedAt: DateTime!</code><br><br></infobox>

<h4 id="System-field-id"><a href="#System-field-id" class="headerlink" title="System field: id"></a>System field: <code>id</code></h4><p>A node will automatically get assigned a globally unique identifier when it’s created, this identifier is stored in the <code>id</code> field.</p>
<p>Whenever you add the <code>id</code> field to a type definition to expose it in the GraphQL API, you must annotate it with the <code>@unique</code> directive.</p>
<p>The <code>id</code> has the following properties:</p>
<ul>
<li>Consists of 25 alphanumeric characters (letters are always lowercase)</li>
<li>Always starts with a (lowercase) letter <code>c</code></li>
<li>Follows <a href="https://github.com/ericelliott/cuid" target="_blank" rel="noopener">cuid</a> (<em>collision resistant unique identifiers</em>) scheme</li>
</ul>
<p>Notice that all your object types will implement the <code>Node</code> interface in the database schema. This is what the <code>Node</code> interface looks like:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface Node &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="System-fields-createdAt-and-updatedAt"><a href="#System-fields-createdAt-and-updatedAt" class="headerlink" title="System fields: createdAt and updatedAt"></a>System fields: <code>createdAt</code> and <code>updatedAt</code></h4><p>The data model further provides two special fields which you can add to your types:</p>
<ul>
<li><code>createdAt: DateTime!</code>: Stores the exact date and time for when a node of this object type was <em>created</em>.</li>
<li><code>updatedAt: DateTime!</code>: Stores the exact date and time for when a node of this object type was <em>last updated</em>.</li>
</ul>
<p>If you want your types to expose these fields, you can simply add them to the type definition, for example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type User &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  createdAt: DateTime!</span><br><span class="line">  updatedAt: DateTime!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Generated-API-operations-for-fields"><a href="#Generated-API-operations-for-fields" class="headerlink" title="Generated API operations for fields"></a>Generated API operations for fields</h3><p>Fields in the data model affect the available <a href="!alias-ahwee4zaey#query-arguments">query arguments</a>.</p>
<h2 id="Relations"><a href="#Relations" class="headerlink" title="Relations"></a>Relations</h2><p>A <em>relation</em> defines the semantics of a connection between two <a href="#object-types">types</a>. Two types in a relation are connected via a <a href="#scalar-and-relation-fields">relation field</a>. When a relation might be ambiguous, the relation field needs to be annotated with the <a href="#relation-fields"><code>@relation</code></a> directive to disambiguate it.</p>
<p>A relation can also connect a type with itself. It is then referred to as a <em>self-relation</em>.</p>
<h3 id="Required-relations"><a href="#Required-relations" class="headerlink" title="Required relations"></a>Required relations</h3><p>For a <em>to-one</em> relation field, you can configure whether it is <em>required</em> or <em>optional</em>. The required flag acts as a contract in GraphQL that this field can never be <code>null</code>. A field for the address of a user would therefore be of type <code>Address</code> or <code>Address!</code>.</p>
<p>Nodes for a type that contains a required <em>to-one</em> relation field can only be created using a <a href="!alias-ol0yuoz6go#nested-mutations">nested mutation</a> to ensure the according field will not be <code>null</code>.</p>
<blockquote>
<p>Note that a <em>to-many</em> relation field is always set to required. For example, a field that contains many user addresses always uses the type <code>[Address!]!</code> and can never be of type <code>[Address!]</code>. The reason is that in case the field doesn’t contain any nodes, <code>[]</code> will be returned, which is not <code>null</code>.</p>
</blockquote>
<h3 id="The-relation-directive"><a href="#The-relation-directive" class="headerlink" title="The @relation directive"></a>The <code>@relation</code> directive</h3><p>When defining relations between types, there is the <code>@relation</code> directive which provides meta-information about the relation. It can take two arguments:</p>
<ul>
<li><code>name</code>: An identifier for this relation (provided as a string). This argument is only required if relations are ambiguous. Note that the <code>name</code> argument is required every time you’re using the <code>@relation</code> directive.</li>
<li><code>onDelete</code>: Specifies the <em>deletion behaviour</em> and enables <em>cascading deletes</em>. In case a node with related nodes gets deleted, the deletion behaviour determines what should happen to the related nodes. The input values for this argument are defined as an enum with the following possible values:<ul>
<li><code>SET_NULL</code> (default): Set the related node(s) to <code>null</code>.</li>
<li><code>CASCADE</code>: Delete the related node(s). Note that is not possible to set <em>both</em> ends of a bidirectional relation to <code>CASCADE</code>.</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>Note</strong>:</p>
</blockquote>
<p>Here is an example of a data model where the <code>@relation</code> directive is used:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">type User &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  stories: [Story!]! @relation(name: &quot;StoriesByUser&quot; onDelete: CASCADE)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Story &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  text: String!</span><br><span class="line">  author: User @relation(name: &quot;StoriesByUser&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The deletion behaviour in this example is as follows:</p>
<ul>
<li>When a <code>User</code> node gets deleted, all its related <code>Story</code> nodes will be deleted as well.</li>
<li>When a <code>Story</code> node gets deleted, it will simply be removed from the <code>stories</code> list on the related <code>User</code> node.</li>
</ul>
<h4 id="Omitting-the-relation-directive"><a href="#Omitting-the-relation-directive" class="headerlink" title="Omitting the @relation directive"></a>Omitting the <code>@relation</code> directive</h4><p>In the simplest case, where a relation between two types is unambiguous and the default deletion behaviour (<code>SET_NULL</code>) should be applied, the corresponding relation fields do not have to be annotated with the <code>@relation</code> directive.</p>
<p>Here we are defining a bidirectional <em>one-to-many</em> relation between the <code>User</code> and <code>Story</code> types. Since <code>onDelete</code> has not been provided, the default deletion behaviour is used: <code>SET_NULL</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">type User &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  stories: [Story!]!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Story &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  text: String!</span><br><span class="line">  author: User</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The deletion behaviour in this example is as follows:</p>
<ul>
<li>When a <code>User</code> node gets deleted, the <code>author</code> field on all its related <code>Story</code> nodes will be set to <code>null</code>. Note that if the <code>author</code> field was marked as <a href="#required">required</a>, the operation would result in an error.</li>
<li>When a <code>Story</code> node gets deleted, it will simply be removed from the <code>stories</code> list on the related <code>User</code> node.</li>
</ul>
<h4 id="Using-the-name-argument-of-the-relation-directive"><a href="#Using-the-name-argument-of-the-relation-directive" class="headerlink" title="Using the name argument of the @relation directive"></a>Using the <code>name</code> argument of the <code>@relation</code> directive</h4><p>In certain cases, your data model may contain ambiguous relations. For example, consider you not only want a relation to express the “author-relationship” between <code>User</code> and <code>Story</code>, but you also want a relation to express which <code>Story</code> nodes have been <em>liked</em> by a <code>User</code>.</p>
<p>In that case, you end up with two different relations between <code>User</code> and <code>Story</code>! In order to disambiguate them, you need to give the relation a name:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">type User &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  writtenStories: [Story!]! @relation(name: &quot;WrittenStories&quot;)</span><br><span class="line">  likedStories: [Story!]! @relation(name: &quot;LikedStories&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Story &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  text: String!</span><br><span class="line">  author: User! @relation(name: &quot;WrittenStories&quot;)</span><br><span class="line">  likedBy: [User!]! @relation(name: &quot;LikedStories&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If the <code>name</code> wasn’t provided in this case, there would be no way to decide whether <code>writtenStories</code> should relate to the <code>author</code> or the <code>likedBy</code> field.</p>
<h4 id="Using-the-onDelete-argument-of-the-relation-directive"><a href="#Using-the-onDelete-argument-of-the-relation-directive" class="headerlink" title="Using the onDelete argument of the @relation directive"></a>Using the <code>onDelete</code> argument of the <code>@relation</code> directive</h4><p>As mentioned above, you can specify a dedicated deletion behaviour for the related nodes. That’s what the <code>onDelete</code> argument of the <code>@relation</code> directive is for.</p>
<p>Consider the following example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">type User &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  comments: [Comment!]! @relation(name: &quot;CommentAuthor&quot;, onDelete: CASCADE)</span><br><span class="line">  blog: Blog @relation(name: &quot;BlogOwner&quot;, onDelete: CASCADE)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Blog &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  comments: [Comment!]! @relation(name: &quot;Comments&quot;, onDelete: CASCADE)</span><br><span class="line">  owner: User! @relation(name: &quot;BlogOwner&quot;, onDelete: SET_NULL)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Comment &#123;</span><br><span class="line">  id: ID! @unique</span><br><span class="line">  blog: Blog! @relation(name: &quot;Comments&quot;, onDelete: SET_NULL)</span><br><span class="line">  author: User @relation(name: &quot;CommentAuthor&quot;, onDelete: SET_NULL)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Let’s investigate the deletion behaviour for the three types:</p>
<ul>
<li>When a <code>User</code> node gets deleted,<ul>
<li>all related <code>Comment</code> nodes will be deleted.</li>
<li>the related <code>Blog</code> node will be deleted.</li>
</ul>
</li>
<li>When a <code>Blog</code> node gets deleted,<ul>
<li>all related <code>Comment</code> nodes will be deleted.</li>
<li>the related <code>User</code> node will have its <code>blog</code> field set to <code>null</code>.</li>
</ul>
</li>
<li>When a <code>Comment</code> node gets deleted,<ul>
<li>the related <code>Blog</code> node continues to exist and the deleted <code>Comment</code> node is removed from its <code>comments</code> list.</li>
<li>the related <code>User</code> node continues to exist and the deleted <code>Comment</code> node is removed from its <code>comments</code> list.</li>
</ul>
</li>
</ul>
<h3 id="Generated-API-operations-for-relations"><a href="#Generated-API-operations-for-relations" class="headerlink" title="Generated API operations for relations"></a>Generated API operations for relations</h3><p>The relations that are included in your schema affect the available operations in the <a href="!alias-abogasd0go">GraphQL API</a>. For every relation,</p>
<ul>
<li><a href="!alias-ahwee4zaey#querying-data-across-relations">relation queries</a> allow you to query data across types or aggregated for a relation (note that this is also possible using <a href="https://facebook.github.io/relay/" target="_blank" rel="noopener">Relay</a>‘s <a href="!alias-ahwee4zaey#connection-queries">connection model</a>)</li>
<li><a href="!alias-ol0yuoz6go#nested-mutations">nested mutations</a> allow you to create, connect, update, upsert and delete nodes across types</li>
<li><a href="!alias-aey0vohche#relation-subscriptions">relation subscriptions</a> allow you to get notified of changes to a relation</li>
</ul>
<h2 id="GraphQL-directives"><a href="#GraphQL-directives" class="headerlink" title="GraphQL directives"></a>GraphQL directives</h2><p>Directives are used to provide additional information in your data model. They look like this: <code>@name(argument: &quot;value&quot;)</code> or simply <code>@name</code> when there are no arguments.</p>
<h3 id="Data-model-directives"><a href="#Data-model-directives" class="headerlink" title="Data model directives"></a>Data model directives</h3><p>Data model directives describe additional information about types or fields in the GraphQL schema.</p>
<h4 id="Unique-scalar-fields"><a href="#Unique-scalar-fields" class="headerlink" title="Unique scalar fields"></a>Unique scalar fields</h4><p>The <code>@unique</code> directive marks a scalar field as <a href="#unique">unique</a>. Unique fields will have a unique <em>index</em> applied in the underlying database.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># the `User` type has a unique `email` field</span><br><span class="line">type User &#123;</span><br><span class="line">  email: String @unique</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Find more info about the <code>@unique</code> directive <a href="#unique">above</a>.</p>
<h4 id="Relation-fields"><a href="#Relation-fields" class="headerlink" title="Relation fields"></a>Relation fields</h4><p>The directive <code>@relation(name: String, onDelete: ON_DELETE! = NO_ACTION)</code> can be attached to a relation field.</p>
<p><a href="#the-relation-directive">See above</a> for more information.</p>
<h4 id="Default-value-for-scalar-fields"><a href="#Default-value-for-scalar-fields" class="headerlink" title="Default value for scalar fields"></a>Default value for scalar fields</h4><p>The directive <code>@default(value: String!)</code> sets <a href="#default-value">a default value</a> for a scalar field. Note that the <code>value</code> argument is of type String for all scalar fields (even if the fields themselves are not strings):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># the `title`, `published` and `someNumber` fields have default values `New Post`, `false` and `42`</span><br><span class="line">type Post &#123;</span><br><span class="line">  title: String! @default(value: &quot;New Post&quot;)</span><br><span class="line">  published: Boolean! @default(value: &quot;false&quot;)</span><br><span class="line">  someNumber: Int! @default(value: &quot;42&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Temporary-directives"><a href="#Temporary-directives" class="headerlink" title="Temporary directives"></a>Temporary directives</h3><p>Temporary directives are used to perform one-time migration operations. After deploying a service that contain a temporary directive, it <strong>needs to be manually removed from the type definitions file</strong>.</p>
<h4 id="Renaming-a-type-or-field"><a href="#Renaming-a-type-or-field" class="headerlink" title="Renaming a type or field"></a>Renaming a type or field</h4><p>The temporary directive <code>@rename(oldName: String!)</code> is used to rename a type or field.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># renaming the `Post` type to `Story`, and its `text` field to `content`</span><br><span class="line">type Story @rename(oldName: &quot;Post&quot;) &#123;</span><br><span class="line">  content: String @rename(oldName: &quot;text&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<infobox type="warning"><br><br>If the rename directive is not used, Prisma would remove the old type and field before creating the new one, resulting in loss of data!<br><br></infobox>

<h4 id="Migrating-the-value-of-a-scalar-field"><a href="#Migrating-the-value-of-a-scalar-field" class="headerlink" title="Migrating the value of a scalar field"></a>Migrating the value of a scalar field</h4><p>The temporary directive <code>@migrationValue(value: String!)</code> is used to migrate the value of a scalar field. When changing an optional field to a required field, it is necessary to also use this directive.</p>
<h2 id="Naming-conventions"><a href="#Naming-conventions" class="headerlink" title="Naming conventions"></a>Naming conventions</h2><p>Different objects you encounter in a Prisma service like types or relations follow separate naming conventions to help you distinguish them.</p>
<h3 id="Types"><a href="#Types" class="headerlink" title="Types"></a>Types</h3><p>The type name determines the name of derived queries and mutations as well as the argument names for nested mutations. Type names can only contain <strong>alphanumeric characters</strong> and need to start with an uppercase letter. They can contain <strong>at most 64 characters</strong>.</p>
<p><em>It’s recommended to choose type names in the singular form.</em></p>
<p><em>Type names are unique on a service level.</em></p>
<h5 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h5><ul>
<li><code>Post</code></li>
<li><code>PostCategory</code></li>
</ul>
<h3 id="Scalar-and-relation-fields"><a href="#Scalar-and-relation-fields" class="headerlink" title="Scalar and relation fields"></a>Scalar and relation fields</h3><p>The name of a scalar field is used in queries and in query arguments of mutations. Field names can only contain <strong>alphanumeric characters</strong> and need to start with a lowercase letter. They can contain <strong>at most 64 characters</strong>.</p>
<p>The name of relation fields follows the same conventions and determines the argument names for relation mutations.</p>
<p><em>It’s recommended to only choose plural names for list fields</em>.</p>
<p><em>Field names are unique on a type level.</em></p>
<h5 id="Examples-1"><a href="#Examples-1" class="headerlink" title="Examples"></a>Examples</h5><ul>
<li><code>name</code></li>
<li><code>email</code></li>
<li><code>categoryTags</code></li>
</ul>
<h3 id="Relations-1"><a href="#Relations-1" class="headerlink" title="Relations"></a>Relations</h3><p>Relation names can only contain <strong>alphanumeric characters</strong> and need to start with an uppercase letter. They can contain <strong>at most 64 characters</strong>.</p>
<p><em>Relation names are unique on a service level.</em></p>
<h5 id="Examples-2"><a href="#Examples-2" class="headerlink" title="Examples"></a>Examples</h5><ul>
<li><code>UserOnPost</code>, <code>UserPosts</code> or <code>PostAuthor</code>, with field names <code>user</code> and <code>posts</code></li>
<li><code>Appointments</code>, <code>EmployeeOnAppointment</code> or <code>AppointmentEmployee</code>, with field names <code>employee</code> and <code>appointments</code></li>
</ul>
<h3 id="Enums"><a href="#Enums" class="headerlink" title="Enums"></a>Enums</h3><p>Enum values can only contain <strong>alphanumeric characters and underscores</strong> and need to start with an uppercase letter. The name of an enum value can be used in query filters and mutations. They can contain <strong>at most 191 characters</strong>.</p>
<p><em>Enum names are unique on a service level.</em></p>
<p><em>Enum value names are unique on an enum level.</em></p>
<h5 id="Examples-3"><a href="#Examples-3" class="headerlink" title="Examples"></a>Examples</h5><ul>
<li><code>A</code></li>
<li><code>ROLE_TAG</code></li>
<li><code>RoleTag</code></li>
</ul>
<h2 id="More-SDL-features"><a href="#More-SDL-features" class="headerlink" title="More SDL features"></a>More SDL features</h2><p>In this section, we describe further SDL features that are not yet supported for data modelling with Prisma.</p>
<h3 id="Interfaces"><a href="#Interfaces" class="headerlink" title="Interfaces"></a>Interfaces</h3><p>“Like many type systems, GraphQL supports interfaces. An interface is an abstract type that includes a certain set of fields that a type must include to implement the interface.” From the official <a href="http://graphql.org/learn/schema/#interfaces" target="_blank" rel="noopener">GraphQL Documentation</a></p>
<blockquote>
<p><strong>Note</strong>: To learn more about when and how interfaces are coming to Prisma, check out this <a href="https://github.com/graphcool/prisma/issues/83" target="_blank" rel="noopener">feature request</a>.</p>
</blockquote>
<h3 id="Interfaces-1"><a href="#Interfaces-1" class="headerlink" title="Interfaces"></a>Interfaces</h3><p>“Like many type systems, GraphQL supports interfaces. An interface is an abstract type that includes a certain set of fields that a type must include to implement the interface.” From the official <a href="http://graphql.org/learn/schema/#interfaces" target="_blank" rel="noopener">GraphQL Documentation</a></p>
<blockquote>
<p><strong>Note</strong>: To learn more about when and how interfaces are coming to Prisma, check out this <a href="https://github.com/graphcool/prisma/issues/83" target="_blank" rel="noopener">feature request</a>.</p>
</blockquote>
<h3 id="Union-types"><a href="#Union-types" class="headerlink" title="Union types"></a>Union types</h3><p>“Union types are very similar to interfaces, but they don’t get to specify any common fields between the types.” From the official <a href="http://graphql.org/learn/schema/#union-types" target="_blank" rel="noopener">GraphQL Documentation</a></p>
<blockquote>
<p><strong>Note</strong>: To learn more about when and how union types are coming to Prisma, check out this <a href="https://github.com/graphcool/prisma/issues/165" target="_blank" rel="noopener">feature request</a>.</p>
</blockquote>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Graphcool/" rel="tag"># Graphcool</a>
          
            <a href="/tags/Prisma/" rel="tag"># Prisma</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/02/17/Readme|React-pattern/" rel="next" title="Readme|Reactpattern">
                <i class="fa fa-chevron-left"></i> Readme|Reactpattern
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/02/19/Prisma-yaml/" rel="prev" title="Primsa-YAML 配置文件">
                Primsa-YAML 配置文件 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="React-Apollo" />
            
              <p class="site-author-name" itemprop="name">React-Apollo</p>
              <p class="site-description motion-element" itemprop="description">base on javascript</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">104</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">71</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#description-An-overview-of-how-to-design-data-models-with-Prisma"><span class="nav-number">1.</span> <span class="nav-text">description: An overview of how to design data models with Prisma.</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Data-Modelling"><span class="nav-number"></span> <span class="nav-text">Data Modelling</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Overview"><span class="nav-number">1.</span> <span class="nav-text">Overview</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Example"><span class="nav-number">1.1.</span> <span class="nav-text">Example</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Building-blocks-of-the-data-model"><span class="nav-number">1.2.</span> <span class="nav-text">Building blocks of the data model</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Prisma-database-schema-vs-Data-model"><span class="nav-number">2.</span> <span class="nav-text">Prisma database schema vs Data model</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Object-types"><span class="nav-number">3.</span> <span class="nav-text">Object types</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Defining-an-object-type"><span class="nav-number">3.1.</span> <span class="nav-text">Defining an object type</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Generated-API-operations-for-types"><span class="nav-number">3.2.</span> <span class="nav-text">Generated API operations for types</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fields"><span class="nav-number">4.</span> <span class="nav-text">Fields</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Scalar-types"><span class="nav-number">4.1.</span> <span class="nav-text">Scalar types</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#String"><span class="nav-number">4.1.1.</span> <span class="nav-text">String</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Integer"><span class="nav-number">4.1.2.</span> <span class="nav-text">Integer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Float"><span class="nav-number">4.1.3.</span> <span class="nav-text">Float</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Boolean"><span class="nav-number">4.1.4.</span> <span class="nav-text">Boolean</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DateTime"><span class="nav-number">4.1.5.</span> <span class="nav-text">DateTime</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Enum"><span class="nav-number">4.1.6.</span> <span class="nav-text">Enum</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JSON"><span class="nav-number">4.1.7.</span> <span class="nav-text">JSON</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ID"><span class="nav-number">4.1.8.</span> <span class="nav-text">ID</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Type-modifiers"><span class="nav-number">4.2.</span> <span class="nav-text">Type modifiers</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#List"><span class="nav-number">4.2.1.</span> <span class="nav-text">List</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Required"><span class="nav-number">4.2.2.</span> <span class="nav-text">Required</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Field-constraints"><span class="nav-number">4.3.</span> <span class="nav-text">Field constraints</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Unique"><span class="nav-number">4.3.1.</span> <span class="nav-text">Unique</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#More-constraints"><span class="nav-number">4.3.2.</span> <span class="nav-text">More constraints</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Default-value"><span class="nav-number">4.4.</span> <span class="nav-text">Default value</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-fields"><span class="nav-number">4.5.</span> <span class="nav-text">System fields</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#System-field-id"><span class="nav-number">4.5.1.</span> <span class="nav-text">System field: id</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#System-fields-createdAt-and-updatedAt"><span class="nav-number">4.5.2.</span> <span class="nav-text">System fields: createdAt and updatedAt</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Generated-API-operations-for-fields"><span class="nav-number">4.6.</span> <span class="nav-text">Generated API operations for fields</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Relations"><span class="nav-number">5.</span> <span class="nav-text">Relations</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Required-relations"><span class="nav-number">5.1.</span> <span class="nav-text">Required relations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-relation-directive"><span class="nav-number">5.2.</span> <span class="nav-text">The @relation directive</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Omitting-the-relation-directive"><span class="nav-number">5.2.1.</span> <span class="nav-text">Omitting the @relation directive</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-the-name-argument-of-the-relation-directive"><span class="nav-number">5.2.2.</span> <span class="nav-text">Using the name argument of the @relation directive</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-the-onDelete-argument-of-the-relation-directive"><span class="nav-number">5.2.3.</span> <span class="nav-text">Using the onDelete argument of the @relation directive</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Generated-API-operations-for-relations"><span class="nav-number">5.3.</span> <span class="nav-text">Generated API operations for relations</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GraphQL-directives"><span class="nav-number">6.</span> <span class="nav-text">GraphQL directives</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Data-model-directives"><span class="nav-number">6.1.</span> <span class="nav-text">Data model directives</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Unique-scalar-fields"><span class="nav-number">6.1.1.</span> <span class="nav-text">Unique scalar fields</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Relation-fields"><span class="nav-number">6.1.2.</span> <span class="nav-text">Relation fields</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Default-value-for-scalar-fields"><span class="nav-number">6.1.3.</span> <span class="nav-text">Default value for scalar fields</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Temporary-directives"><span class="nav-number">6.2.</span> <span class="nav-text">Temporary directives</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Renaming-a-type-or-field"><span class="nav-number">6.2.1.</span> <span class="nav-text">Renaming a type or field</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Migrating-the-value-of-a-scalar-field"><span class="nav-number">6.2.2.</span> <span class="nav-text">Migrating the value of a scalar field</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Naming-conventions"><span class="nav-number">7.</span> <span class="nav-text">Naming conventions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Types"><span class="nav-number">7.1.</span> <span class="nav-text">Types</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Examples"><span class="nav-number">7.1.0.1.</span> <span class="nav-text">Examples</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scalar-and-relation-fields"><span class="nav-number">7.2.</span> <span class="nav-text">Scalar and relation fields</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Examples-1"><span class="nav-number">7.2.0.1.</span> <span class="nav-text">Examples</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Relations-1"><span class="nav-number">7.3.</span> <span class="nav-text">Relations</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Examples-2"><span class="nav-number">7.3.0.1.</span> <span class="nav-text">Examples</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Enums"><span class="nav-number">7.4.</span> <span class="nav-text">Enums</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Examples-3"><span class="nav-number">7.4.0.1.</span> <span class="nav-text">Examples</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#More-SDL-features"><span class="nav-number">8.</span> <span class="nav-text">More SDL features</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Interfaces"><span class="nav-number">8.1.</span> <span class="nav-text">Interfaces</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Interfaces-1"><span class="nav-number">8.2.</span> <span class="nav-text">Interfaces</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Union-types"><span class="nav-number">8.3.</span> <span class="nav-text">Union types</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2016 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">React-Apollo</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">126.4k</span>
  
</div>









        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("0kGBxj215XRijm6VofFkzlws-gzGzoHsz", "V2FDLF52mPXum5Hh6wvwGpEk");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  
  <script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.4"></script>
  <script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.4"></script>


  

</body>
</html>
